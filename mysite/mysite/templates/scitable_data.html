<script type="text/javascript"> 
/* Creates data objects used elsewhere. Codes is templated. */
function DataSource() {
  "use strict";
  var sciSheets = new SciSheets();
  this.tableId = "{{ table_id }}";
  this.tableCaption = "{{ table_caption }}";
  this.columnNames = [
  {% for col in column_names %}
    "{{ col }}"
    {% if col == final_column_name %}
     ];
    {% else %}
     ,
    {% endif %}
  {% endfor %}
  this.columnDefs = [
  {% for col in column_names %}
    {key: "{{ col }}", formatter: sciSheets.formatColumn("{{ col }}"), editor:  new YAHOO.widget.TextareaCellEditor()}
    {% if col == final_column_name %}
     ];
    {% else %}
     ,
    {% endif %}
  {% endfor %}
  this.dataSource = [
  {% for row in data %}
    { {{ row }}
    {% for col, val in row.items %}
      "{{ col }}": "{{ val }}"
      {% if col == final_column_name %}
        {% if row == final_row %}
          }];
        {% else %}
          },
        {% endif %}
      {% else %}
        ,
      {% endif %}
    {% endfor %}
  {% endfor %}
}
</script>
